import csv
import logging
from dataclasses import dataclass, field
from pathlib import Path
from examples.plugins import GeneralPlugin
from statistics import mean
PLUGIN_NAME=Path(__file__).name.split('.')[0]
CSV_FILE=Path('../csv_testdata/Smoother.csv')

@dataclass
class Input:
    value: float = 0
    delta_max: float = 4
    window_size: int = 3
    value_history: [float] = field(default_factory=list)


@dataclass
class Output:
    value: float = 0
    value_history:  [float] = field(default_factory=list)


def run(input: Input, output: Output, log: logging.Logger):
    output.value_history = input.value_history.copy()
    output.value_history.append(input.value)
    output.value_history = output.value_history[-int(input.window_size):]
    speed_avg = mean(output.value_history)
    output.value = speed_avg if abs(input.value - speed_avg) < input.delta_max else input.value

def run_post(input: Input, output: Output, log: logging.Logger):
    input.value_history = output.value_history.copy()


def test():
    testdata=[{'clock_tick': 0.0, 'input.value': 0.0, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[]', 'output.value': 0.0, 'output.value_history': '[0.0]', 'log': '', 'qqq': ''}, {'clock_tick': 1.0, 'input.value': 0.9999833334166665, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[0.0]', 'output.value': 0.4999916667083332, 'output.value_history': '[0.0, 0.9999833334166665]', 'log': '', 'qqq': ''}, {'clock_tick': 2.0, 'input.value': 1.999866669333308, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[0.0, 0.9999833334166665]', 'output.value': 0.9999500009166582, 'output.value_history': '[0.0, 0.9999833334166665, 1.999866669333308]', 'log': '', 'qqq': ''}, {'clock_tick': 3.0, 'input.value': 2.999550020249566, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[0.0, 0.9999833334166665, 1.999866669333308]', 'output.value': 1.9998000076665137, 'output.value_history': '[0.9999833334166665, 1.999866669333308, 2.999550020249566]', 'log': '', 'qqq': ''}, {'clock_tick': 4.0, 'input.value': 3.998933418663416, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[0.9999833334166665, 1.999866669333308, 2.999550020249566]', 'output.value': 2.999450036082097, 'output.value_history': '[1.999866669333308, 2.999550020249566, 3.998933418663416]', 'log': '', 'qqq': ''}, {'clock_tick': 5.0, 'input.value': 4.997916927067833, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[1.999866669333308, 2.999550020249566, 3.998933418663416]', 'output.value': 3.998800121993605, 'output.value_history': '[2.999550020249566, 3.998933418663416, 4.997916927067833]', 'log': '', 'qqq': ''}, {'clock_tick': 6.0, 'input.value': 5.996400647944459, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[2.999550020249566, 3.998933418663416, 4.997916927067833]', 'output.value': 4.9977503312252365, 'output.value_history': '[3.998933418663416, 4.997916927067833, 5.996400647944459]', 'log': '', 'qqq': ''}, {'clock_tick': 7.0, 'input.value': 6.994284733753277, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[3.998933418663416, 4.997916927067833, 5.996400647944459]', 'output.value': 5.9962007695885235, 'output.value_history': '[4.997916927067833, 5.996400647944459, 6.994284733753277]', 'log': '', 'qqq': ''}, {'clock_tick': 8.0, 'input.value': 7.991469396917269, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[4.997916927067833, 5.996400647944459, 6.994284733753277]', 'output.value': 6.994051592871669, 'output.value_history': '[5.996400647944459, 6.994284733753277, 7.991469396917269]', 'log': '', 'qqq': ''}, {'clock_tick': 9.0, 'input.value': 8.987854919801103, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[5.996400647944459, 6.994284733753277, 7.991469396917269]', 'output.value': 7.991203016823883, 'output.value_history': '[6.994284733753277, 7.991469396917269, 8.987854919801103]', 'log': '', 'qqq': ''}, {'clock_tick': 10.0, 'input.value': 9.983341664682815, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[6.994284733753277, 7.991469396917269, 8.987854919801103]', 'output.value': 8.987555327133729, 'output.value_history': '[7.991469396917269, 8.987854919801103, 9.983341664682815]', 'log': '', 'qqq': ''}, {'clock_tick': 11.0, 'input.value': 10.977830083717482, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[7.991469396917269, 8.987854919801103, 9.983341664682815]', 'output.value': 9.983008889400466, 'output.value_history': '[8.987854919801103, 9.983341664682815, 10.977830083717482]', 'log': '', 'qqq': ''}, {'clock_tick': 12.0, 'input.value': 11.971220728891936, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[8.987854919801103, 9.983341664682815, 10.977830083717482]', 'output.value': 10.97746415909741, 'output.value_history': '[9.983341664682815, 10.977830083717482, 11.971220728891936]', 'log': '', 'qqq': ''}, {'clock_tick': 13.0, 'input.value': 12.963414261969486, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[9.983341664682815, 10.977830083717482, 11.971220728891936]', 'output.value': 11.970821691526302, 'output.value_history': '[10.977830083717482, 11.971220728891936, 12.963414261969486]', 'log': '', 'qqq': ''}, {'clock_tick': 14.0, 'input.value': 13.954311464423649, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[10.977830083717482, 11.971220728891936, 12.963414261969486]', 'output.value': 12.96298215176169, 'output.value_history': '[11.971220728891936, 12.963414261969486, 13.954311464423649]', 'log': '', 'qqq': ''}, {'clock_tick': 15.0, 'input.value': 14.943813247359921, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[11.971220728891936, 12.963414261969486, 13.954311464423649]', 'output.value': 13.953846324584353, 'output.value_history': '[12.963414261969486, 13.954311464423649, 14.943813247359921]', 'log': '', 'qqq': ''}, {'clock_tick': 16.0, 'input.value': 15.931820661424597, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[12.963414261969486, 13.954311464423649, 14.943813247359921]', 'output.value': 14.943315124402723, 'output.value_history': '[13.954311464423649, 14.943813247359921, 15.931820661424597]', 'log': '', 'qqq': ''}, {'clock_tick': 17.0, 'input.value': 16.918234906699603, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[13.954311464423649, 14.943813247359921, 15.931820661424597]', 'output.value': 15.931289605161373, 'output.value_history': '[14.943813247359921, 15.931820661424597, 16.918234906699603]', 'log': '', 'qqq': ''}, {'clock_tick': 18.0, 'input.value': 17.902957342582418, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[14.943813247359921, 15.931820661424597, 16.918234906699603]', 'output.value': 16.91767097023554, 'output.value_history': '[15.931820661424597, 16.918234906699603, 17.902957342582418]', 'log': '', 'qqq': ''}, {'clock_tick': 19.0, 'input.value': 18.88588949765006, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[15.931820661424597, 16.918234906699603, 17.902957342582418]', 'output.value': 17.902360582310692, 'output.value_history': '[16.918234906699603, 17.902957342582418, 18.88588949765006]', 'log': '', 'qqq': ''}, {'clock_tick': 20.0, 'input.value': 19.866933079506122, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[16.918234906699603, 17.902957342582418, 18.88588949765006]', 'output.value': 18.8852599732462, 'output.value_history': '[17.902957342582418, 18.88588949765006, 19.866933079506122]', 'log': '', 'qqq': ''}, {'clock_tick': 21.0, 'input.value': 20.845989984609954, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[17.902957342582418, 18.88588949765006, 19.866933079506122]', 'output.value': 19.866270853922046, 'output.value_history': '[18.88588949765006, 19.866933079506122, 20.845989984609954]', 'log': '', 'qqq': ''}, {'clock_tick': 22.0, 'input.value': 21.822962308086932, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[18.88588949765006, 19.866933079506122, 20.845989984609954]', 'output.value': 20.84529512406767, 'output.value_history': '[19.866933079506122, 20.845989984609954, 21.822962308086932]', 'log': '', 'qqq': ''}, {'clock_tick': 23.0, 'input.value': 22.79775235351884, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[19.866933079506122, 20.845989984609954, 21.822962308086932]', 'output.value': 21.82223488207191, 'output.value_history': '[20.845989984609954, 21.822962308086932, 22.79775235351884]', 'log': '', 'qqq': ''}, {'clock_tick': 24.0, 'input.value': 23.77026264271346, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[20.845989984609954, 21.822962308086932, 22.79775235351884]', 'output.value': 22.796992434773077, 'output.value_history': '[21.822962308086932, 22.79775235351884, 23.77026264271346]', 'log': '', 'qqq': ''}, {'clock_tick': 25.0, 'input.value': 24.740395925452294, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[21.822962308086932, 22.79775235351884, 23.77026264271346]', 'output.value': 23.769470307228197, 'output.value_history': '[22.79775235351884, 23.77026264271346, 24.740395925452294]', 'log': '', 'qqq': ''}, {'clock_tick': 26.0, 'input.value': 25.70805518921551, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[22.79775235351884, 23.77026264271346, 24.740395925452294]', 'output.value': 24.739571252460422, 'output.value_history': '[23.77026264271346, 24.740395925452294, 25.70805518921551]', 'log': '', 'qqq': ''}, {'clock_tick': 27.0, 'input.value': 26.673143668883114, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[23.77026264271346, 24.740395925452294, 25.70805518921551]', 'output.value': 25.70719826118364, 'output.value_history': '[24.740395925452294, 25.70805518921551, 26.673143668883114]', 'log': '', 'qqq': ''}, {'clock_tick': 28.0, 'input.value': 27.635564856411378, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[24.740395925452294, 25.70805518921551, 26.673143668883114]', 'output.value': 26.672254571503334, 'output.value_history': '[25.70805518921551, 26.673143668883114, 27.635564856411378]', 'log': '', 'qqq': ''}, {'clock_tick': 29.0, 'input.value': 28.595222510483552, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[25.70805518921551, 26.673143668883114, 27.635564856411378]', 'output.value': 27.63464367859268, 'output.value_history': '[26.673143668883114, 27.635564856411378, 28.595222510483552]', 'log': '', 'qqq': ''}, {'clock_tick': 30.0, 'input.value': 29.552020666133956, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[26.673143668883114, 27.635564856411378, 28.595222510483552]', 'output.value': 28.594269344342962, 'output.value_history': '[27.635564856411378, 28.595222510483552, 29.552020666133956]', 'log': '', 'qqq': ''}, {'clock_tick': 31.0, 'input.value': 30.50586364434435, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[27.635564856411378, 28.595222510483552, 29.552020666133956]', 'output.value': 29.551035606987284, 'output.value_history': '[28.595222510483552, 29.552020666133956, 30.50586364434435]', 'log': '', 'qqq': ''}, {'clock_tick': 32.0, 'input.value': 31.456656061611778, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[28.595222510483552, 29.552020666133956, 30.50586364434435]', 'output.value': 30.504846790696693, 'output.value_history': '[29.552020666133956, 30.50586364434435, 31.456656061611778]', 'log': '', 'qqq': ''}, {'clock_tick': 33.0, 'input.value': 32.40430283948684, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[29.552020666133956, 30.50586364434435, 31.456656061611778]', 'output.value': 31.455607515147655, 'output.value_history': '[30.50586364434435, 31.456656061611778, 32.40430283948684]', 'log': '', 'qqq': ''}, {'clock_tick': 34.0, 'input.value': 33.34870921408144, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[30.50586364434435, 31.456656061611778, 32.40430283948684]', 'output.value': 32.40322270506002, 'output.value_history': '[31.456656061611778, 32.40430283948684, 33.34870921408144]', 'log': '', 'qqq': ''}, {'clock_tick': 35.0, 'input.value': 34.28978074554514, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[31.456656061611778, 32.40430283948684, 33.34870921408144]', 'output.value': 33.34759759970447, 'output.value_history': '[32.40430283948684, 33.34870921408144, 34.28978074554514]', 'log': '', 'qqq': ''}, {'clock_tick': 36.0, 'input.value': 35.227423327508994, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[32.40430283948684, 33.34870921408144, 34.28978074554514]', 'output.value': 34.28863776237852, 'output.value_history': '[33.34870921408144, 34.28978074554514, 35.227423327508994]', 'log': '', 'qqq': ''}, {'clock_tick': 37.0, 'input.value': 36.1615431964962, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[33.34870921408144, 34.28978074554514, 35.227423327508994]', 'output.value': 35.22624908985011, 'output.value_history': '[34.28978074554514, 35.227423327508994, 36.1615431964962]', 'log': '', 'qqq': ''}, {'clock_tick': 38.0, 'input.value': 37.09204694129827, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[34.28978074554514, 35.227423327508994, 36.1615431964962]', 'output.value': 36.16033782176782, 'output.value_history': '[35.227423327508994, 36.1615431964962, 37.09204694129827]', 'log': '', 'qqq': ''}, {'clock_tick': 39.0, 'input.value': 38.01884151231614, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[35.227423327508994, 36.1615431964962, 37.09204694129827]', 'output.value': 37.09081055003687, 'output.value_history': '[36.1615431964962, 37.09204694129827, 38.01884151231614]', 'log': '', 'qqq': ''}, {'clock_tick': 40.0, 'input.value': 38.941834230865055, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[36.1615431964962, 37.09204694129827, 38.01884151231614]', 'output.value': 38.01757422815982, 'output.value_history': '[37.09204694129827, 38.01884151231614, 38.941834230865055]', 'log': '', 'qqq': ''}, {'clock_tick': 41.0, 'input.value': 39.86093279844229, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[37.09204694129827, 38.01884151231614, 38.941834230865055]', 'output.value': 38.940536180541166, 'output.value_history': '[38.01884151231614, 38.941834230865055, 39.86093279844229]', 'log': '', 'qqq': ''}, {'clock_tick': 42.0, 'input.value': 40.77604530595701, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[38.01884151231614, 38.941834230865055, 39.86093279844229]', 'output.value': 39.859604111754784, 'output.value_history': '[38.941834230865055, 39.86093279844229, 40.77604530595701]', 'log': '', 'qqq': ''}, {'clock_tick': 43.0, 'input.value': 41.68708024292108, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[38.941834230865055, 39.86093279844229, 40.77604530595701]', 'output.value': 40.77468611577346, 'output.value_history': '[39.86093279844229, 40.77604530595701, 41.68708024292108]', 'log': '', 'qqq': ''}, {'clock_tick': 44.0, 'input.value': 42.59394650659996, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[39.86093279844229, 40.77604530595701, 41.68708024292108]', 'output.value': 41.68569068515935, 'output.value_history': '[40.77604530595701, 41.68708024292108, 42.59394650659996]', 'log': '', 'qqq': ''}, {'clock_tick': 45.0, 'input.value': 43.496553411123024, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[40.77604530595701, 41.68708024292108, 42.59394650659996]', 'output.value': 42.592526720214686, 'output.value_history': '[41.68708024292108, 42.59394650659996, 43.496553411123024]', 'log': '', 'qqq': ''}, {'clock_tick': 46.0, 'input.value': 44.39481069655198, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[41.68708024292108, 42.59394650659996, 43.496553411123024]', 'output.value': 43.495103538091655, 'output.value_history': '[42.59394650659996, 43.496553411123024, 44.39481069655198]', 'log': '', 'qqq': ''}, {'clock_tick': 47.0, 'input.value': 45.28862853790683, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[42.59394650659996, 43.496553411123024, 44.39481069655198]', 'output.value': 44.393330881860614, 'output.value_history': '[43.496553411123024, 44.39481069655198, 45.28862853790683]', 'log': '', 'qqq': ''}, {'clock_tick': 48.0, 'input.value': 46.17791755414829, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[43.496553411123024, 44.39481069655198, 45.28862853790683]', 'output.value': 45.2871189295357, 'output.value_history': '[44.39481069655198, 45.28862853790683, 46.17791755414829]', 'log': '', 'qqq': ''}, {'clock_tick': 49.0, 'input.value': 47.0625888171158, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[44.39481069655198, 45.28862853790683, 46.17791755414829]', 'output.value': 46.17637830305697, 'output.value_history': '[45.28862853790683, 46.17791755414829, 47.0625888171158]', 'log': '', 'qqq': ''}, {'clock_tick': 50.0, 'input.value': 47.942553860420304, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[45.28862853790683, 46.17791755414829, 47.0625888171158]', 'output.value': 47.06102007722813, 'output.value_history': '[46.17791755414829, 47.0625888171158, 47.942553860420304]', 'log': '', 'qqq': ''}, {'clock_tick': 51.0, 'input.value': 48.817724688290745, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[46.17791755414829, 47.0625888171158, 47.942553860420304]', 'output.value': 47.94095578860895, 'output.value_history': '[47.0625888171158, 47.942553860420304, 48.817724688290745]', 'log': '', 'qqq': ''}, {'clock_tick': 52.0, 'input.value': 49.68801378437367, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[47.0625888171158, 47.942553860420304, 48.817724688290745]', 'output.value': 48.816097444361574, 'output.value_history': '[47.942553860420304, 48.817724688290745, 49.68801378437367]', 'log': '', 'qqq': ''}, {'clock_tick': 53.0, 'input.value': 50.55333412048469, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[47.942553860420304, 48.817724688290745, 49.68801378437367]', 'output.value': 49.6863575310497, 'output.value_history': '[48.817724688290745, 49.68801378437367, 50.55333412048469]', 'log': '', 'qqq': ''}, {'clock_tick': 54.0, 'input.value': 51.41359916531132, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[48.817724688290745, 49.68801378437367, 50.55333412048469]', 'output.value': 50.55164902338989, 'output.value_history': '[49.68801378437367, 50.55333412048469, 51.41359916531132]', 'log': '', 'qqq': ''}, {'clock_tick': 55.0, 'input.value': 52.26872289306592, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[49.68801378437367, 50.55333412048469, 51.41359916531132]', 'output.value': 51.41188539295398, 'output.value_history': '[50.55333412048469, 51.41359916531132, 52.26872289306592]', 'log': '', 'qqq': ''}, {'clock_tick': 56.0, 'input.value': 53.11861979208834, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[50.55333412048469, 51.41359916531132, 52.26872289306592]', 'output.value': 52.26698061682186, 'output.value_history': '[51.41359916531132, 52.26872289306592, 53.11861979208834]', 'log': '', 'qqq': ''}, {'clock_tick': 57.0, 'input.value': 53.96320487339692, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[51.41359916531132, 52.26872289306592, 53.11861979208834]', 'output.value': 53.11684918618373, 'output.value_history': '[52.26872289306592, 53.11861979208834, 53.96320487339692]', 'log': '', 'qqq': ''}, {'clock_tick': 58.0, 'input.value': 54.802393679187354, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[52.26872289306592, 53.11861979208834, 53.96320487339692]', 'output.value': 53.96140611489087, 'output.value_history': '[53.11861979208834, 53.96320487339692, 54.802393679187354]', 'log': '', 'qqq': ''}, {'clock_tick': 59.0, 'input.value': 55.63610229127838, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[53.11861979208834, 53.96320487339692, 54.802393679187354]', 'output.value': 54.800566947954216, 'output.value_history': '[53.96320487339692, 54.802393679187354, 55.63610229127838]', 'log': '', 'qqq': ''}, {'clock_tick': 60.0, 'input.value': 56.46424733950354, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[53.96320487339692, 54.802393679187354, 55.63610229127838]', 'output.value': 55.634247769989756, 'output.value_history': '[54.802393679187354, 55.63610229127838, 56.46424733950354]', 'log': '', 'qqq': ''}, {'clock_tick': 61.0, 'input.value': 57.28674601004813, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[54.802393679187354, 55.63610229127838, 56.46424733950354]', 'output.value': 56.46236521361001, 'output.value_history': '[55.63610229127838, 56.46424733950354, 57.28674601004813]', 'log': '', 'qqq': ''}, {'clock_tick': 62.0, 'input.value': 58.10351605373051, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[55.63610229127838, 56.46424733950354, 57.28674601004813]', 'output.value': 57.28483646776073, 'output.value_history': '[56.46424733950354, 57.28674601004813, 58.10351605373051]', 'log': '', 'qqq': ''}, {'clock_tick': 63.0, 'input.value': 58.91447579422695, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[56.46424733950354, 57.28674601004813, 58.10351605373051]', 'output.value': 58.101579286001865, 'output.value_history': '[57.28674601004813, 58.10351605373051, 58.91447579422695]', 'log': '', 'qqq': ''}, {'clock_tick': 64.0, 'input.value': 59.71954413623921, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[57.28674601004813, 58.10351605373051, 58.91447579422695]', 'output.value': 58.91251199473222, 'output.value_history': '[58.10351605373051, 58.91447579422695, 59.71954413623921]', 'log': '', 'qqq': ''}, {'clock_tick': 65.0, 'input.value': 60.51864057360395, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[58.10351605373051, 58.91447579422695, 59.71954413623921]', 'output.value': 59.717553501356704, 'output.value_history': '[58.91447579422695, 59.71954413623921, 60.51864057360395]', 'log': '', 'qqq': ''}, {'clock_tick': 66.0, 'input.value': 61.31168519734338, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[58.91447579422695, 59.71954413623921, 60.51864057360395]', 'output.value': 60.516623302395516, 'output.value_history': '[59.71954413623921, 60.51864057360395, 61.31168519734338]', 'log': '', 'qqq': ''}, {'clock_tick': 67.0, 'input.value': 62.09859870365597, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[59.71954413623921, 60.51864057360395, 61.31168519734338]', 'output.value': 61.309641491534435, 'output.value_history': '[60.51864057360395, 61.31168519734338, 62.09859870365597]', 'log': '', 'qqq': ''}, {'clock_tick': 68.0, 'input.value': 62.87930240184686, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[60.51864057360395, 61.31168519734338, 62.09859870365597]', 'output.value': 62.0965287676154, 'output.value_history': '[61.31168519734338, 62.09859870365597, 62.87930240184686]', 'log': '', 'qqq': ''}, {'clock_tick': 69.0, 'input.value': 63.65371822219679, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[61.31168519734338, 62.09859870365597, 62.87930240184686]', 'output.value': 62.87720644256654, 'output.value_history': '[62.09859870365597, 62.87930240184686, 63.65371822219679]', 'log': '', 'qqq': ''}, {'clock_tick': 70.0, 'input.value': 64.4217687237691, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[62.09859870365597, 62.87930240184686, 63.65371822219679]', 'output.value': 63.65159644927092, 'output.value_history': '[62.87930240184686, 63.65371822219679, 64.4217687237691]', 'log': '', 'qqq': ''}, {'clock_tick': 71.0, 'input.value': 65.18337710215366, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[62.87930240184686, 63.65371822219679, 64.4217687237691]', 'output.value': 64.41962134937319, 'output.value_history': '[63.65371822219679, 64.4217687237691, 65.18337710215366]', 'log': '', 'qqq': ''}, {'clock_tick': 72.0, 'input.value': 65.9384671971473, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[63.65371822219679, 64.4217687237691, 65.18337710215366]', 'output.value': 65.18120434102336, 'output.value_history': '[64.4217687237691, 65.18337710215366, 65.9384671971473]', 'log': '', 'qqq': ''}, {'clock_tick': 73.0, 'input.value': 66.68696350036979, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[64.4217687237691, 65.18337710215366, 65.9384671971473]', 'output.value': 65.93626926655692, 'output.value_history': '[65.18337710215366, 65.9384671971473, 66.68696350036979]', 'log': '', 'qqq': ''}, {'clock_tick': 74.0, 'input.value': 67.4287911628145, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[65.18337710215366, 65.9384671971473, 66.68696350036979]', 'output.value': 66.68474062011053, 'output.value_history': '[65.9384671971473, 66.68696350036979, 67.4287911628145]', 'log': '', 'qqq': ''}, {'clock_tick': 75.0, 'input.value': 68.16387600233341, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[65.9384671971473, 66.68696350036979, 67.4287911628145]', 'output.value': 67.42654355517257, 'output.value_history': '[66.68696350036979, 67.4287911628145, 68.16387600233341]', 'log': '', 'qqq': ''}, {'clock_tick': 76.0, 'input.value': 68.89214451105514, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[66.68696350036979, 67.4287911628145, 68.16387600233341]', 'output.value': 68.16160389206769, 'output.value_history': '[67.4287911628145, 68.16387600233341, 68.89214451105514]', 'log': '', 'qqq': ''}, {'clock_tick': 77.0, 'input.value': 69.61352386273568, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[67.4287911628145, 68.16387600233341, 68.89214451105514]', 'output.value': 68.88984812537474, 'output.value_history': '[68.16387600233341, 68.89214451105514, 69.61352386273568]', 'log': '', 'qqq': ''}, {'clock_tick': 78.0, 'input.value': 70.32794192004101, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[68.16387600233341, 68.89214451105514, 69.61352386273568]', 'output.value': 69.61120343127727, 'output.value_history': '[68.89214451105514, 69.61352386273568, 70.32794192004101]', 'log': '', 'qqq': ''}, {'clock_tick': 79.0, 'input.value': 71.03532724176078, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[68.89214451105514, 69.61352386273568, 70.32794192004101]', 'output.value': 70.32559767484582, 'output.value_history': '[69.61352386273568, 70.32794192004101, 71.03532724176078]', 'log': '', 'qqq': ''}, {'clock_tick': 80.0, 'input.value': 71.73560908995228, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[69.61352386273568, 70.32794192004101, 71.03532724176078]', 'output.value': 71.03295941725136, 'output.value_history': '[70.32794192004101, 71.03532724176078, 71.73560908995228]', 'log': '', 'qqq': ''}, {'clock_tick': 81.0, 'input.value': 72.42871743701426, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[70.32794192004101, 71.03532724176078, 71.73560908995228]', 'output.value': 71.7332179229091, 'output.value_history': '[71.03532724176078, 71.73560908995228, 72.42871743701426]', 'log': '', 'qqq': ''}, {'clock_tick': 82.0, 'input.value': 73.11458297268958, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[71.03532724176078, 71.73560908995228, 72.42871743701426]', 'output.value': 72.42630316655203, 'output.value_history': '[71.73560908995228, 72.42871743701426, 73.11458297268958]', 'log': '', 'qqq': ''}, {'clock_tick': 83.0, 'input.value': 73.79313711099627, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[71.73560908995228, 72.42871743701426, 73.11458297268958]', 'output.value': 73.11214584023337, 'output.value_history': '[72.42871743701426, 73.11458297268958, 73.79313711099627]', 'log': '', 'qqq': ''}, {'clock_tick': 84.0, 'input.value': 74.46431199708593, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[72.42871743701426, 73.11458297268958, 73.79313711099627]', 'output.value': 73.79067736025726, 'output.value_history': '[73.11458297268958, 73.79313711099627, 74.46431199708593]', 'log': '', 'qqq': ''}, {'clock_tick': 85.0, 'input.value': 75.12804051402927, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[73.11458297268958, 73.79313711099627, 74.46431199708593]', 'output.value': 74.46182987403715, 'output.value_history': '[73.79313711099627, 74.46431199708593, 75.12804051402927]', 'log': '', 'qqq': ''}, {'clock_tick': 86.0, 'input.value': 75.78425628952769, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[73.79313711099627, 74.46431199708593, 75.12804051402927]', 'output.value': 75.12553626688096, 'output.value_history': '[74.46431199708593, 75.12804051402927, 75.78425628952769]', 'log': '', 'qqq': ''}, {'clock_tick': 87.0, 'input.value': 76.4328937025505, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[74.46431199708593, 75.12804051402927, 75.78425628952769]', 'output.value': 75.78173016870248, 'output.value_history': '[75.12804051402927, 75.78425628952769, 76.4328937025505]', 'log': '', 'qqq': ''}, {'clock_tick': 88.0, 'input.value': 77.07388788989692, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[75.12804051402927, 75.78425628952769, 76.4328937025505]', 'output.value': 76.43034596065837, 'output.value_history': '[75.78425628952769, 76.4328937025505, 77.07388788989692]', 'log': '', 'qqq': ''}, {'clock_tick': 89.0, 'input.value': 77.70717475268239, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[75.78425628952769, 76.4328937025505, 77.07388788989692]', 'output.value': 77.07131878170993, 'output.value_history': '[76.4328937025505, 77.07388788989692, 77.70717475268239]', 'log': '', 'qqq': ''}, {'clock_tick': 90.0, 'input.value': 78.33269096274834, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[76.4328937025505, 77.07388788989692, 77.70717475268239]', 'output.value': 77.70458453510922, 'output.value_history': '[77.07388788989692, 77.70717475268239, 78.33269096274834]', 'log': '', 'qqq': ''}, {'clock_tick': 91.0, 'input.value': 78.95037396899505, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[77.07388788989692, 77.70717475268239, 78.33269096274834]', 'output.value': 78.33007989480859, 'output.value_history': '[77.70717475268239, 78.33269096274834, 78.95037396899505]', 'log': '', 'qqq': ''}, {'clock_tick': 92.0, 'input.value': 79.5601620036366, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[77.70717475268239, 78.33269096274834, 78.95037396899505]', 'output.value': 78.94774231179333, 'output.value_history': '[78.33269096274834, 78.95037396899505, 79.5601620036366]', 'log': '', 'qqq': ''}, {'clock_tick': 93.0, 'input.value': 80.16199408837772, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[78.33269096274834, 78.95037396899505, 79.5601620036366]', 'output.value': 79.55751002033647, 'output.value_history': '[78.95037396899505, 79.5601620036366, 80.16199408837772]', 'log': '', 'qqq': ''}, {'clock_tick': 94.0, 'input.value': 80.75581004051142, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[78.95037396899505, 79.5601620036366, 80.16199408837772]', 'output.value': 80.15932204417525, 'output.value_history': '[79.5601620036366, 80.16199408837772, 80.75581004051142]', 'log': '', 'qqq': ''}, {'clock_tick': 95.0, 'input.value': 81.34155047893738, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[79.5601620036366, 80.16199408837772, 80.75581004051142]', 'output.value': 80.75311820260885, 'output.value_history': '[80.16199408837772, 80.75581004051142, 81.34155047893738]', 'log': '', 'qqq': ''}, {'clock_tick': 96.0, 'input.value': 81.91915683009982, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[80.16199408837772, 80.75581004051142, 81.34155047893738]', 'output.value': 81.33883911651621, 'output.value_history': '[80.75581004051142, 81.34155047893738, 81.91915683009982]', 'log': '', 'qqq': ''}, {'clock_tick': 97.0, 'input.value': 82.488571333845, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[80.75581004051142, 81.34155047893738, 81.91915683009982]', 'output.value': 81.91642621429406, 'output.value_history': '[81.34155047893738, 81.91915683009982, 82.488571333845]', 'log': '', 'qqq': ''}, {'clock_tick': 98.0, 'input.value': 83.04973704919705, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[81.34155047893738, 81.91915683009982, 82.488571333845]', 'output.value': 82.48582173771396, 'output.value_history': '[81.91915683009982, 82.488571333845, 83.04973704919705]', 'log': '', 'qqq': ''}, {'clock_tick': 99.0, 'input.value': 83.60259786005206, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[81.91915683009982, 82.488571333845, 83.04973704919705]', 'output.value': 83.04696874769803, 'output.value_history': '[82.488571333845, 83.04973704919705, 83.60259786005206]', 'log': '', 'qqq': ''}, {'clock_tick': 100.0, 'input.value': 84.14709848078965, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[82.488571333845, 83.04973704919705, 83.60259786005206]', 'output.value': 83.59981113001292, 'output.value_history': '[83.04973704919705, 83.60259786005206, 84.14709848078965]', 'log': '', 'qqq': ''}, {'clock_tick': 101.0, 'input.value': 84.68318446180152, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[83.04973704919705, 83.60259786005206, 84.14709848078965]', 'output.value': 84.14429360088107, 'output.value_history': '[83.60259786005206, 84.14709848078965, 84.68318446180152]', 'log': '', 'qqq': ''}, {'clock_tick': 102.0, 'input.value': 85.21080219493629, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[83.60259786005206, 84.14709848078965, 84.68318446180152]', 'output.value': 84.68036171250915, 'output.value_history': '[84.14709848078965, 84.68318446180152, 85.21080219493629]', 'log': '', 'qqq': ''}, {'clock_tick': 103.0, 'input.value': 85.72989891886034, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[84.14709848078965, 84.68318446180152, 85.21080219493629]', 'output.value': 85.20796185853271, 'output.value_history': '[84.68318446180152, 85.21080219493629, 85.72989891886034]', 'log': '', 'qqq': ''}, {'clock_tick': 104.0, 'input.value': 86.24042272433384, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[84.68318446180152, 85.21080219493629, 85.72989891886034]', 'output.value': 85.72704127937682, 'output.value_history': '[85.21080219493629, 85.72989891886034, 86.24042272433384]', 'log': '', 'qqq': ''}, {'clock_tick': 105.0, 'input.value': 86.7423225594017, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[85.21080219493629, 85.72989891886034, 86.24042272433384]', 'output.value': 86.23754806753196, 'output.value_history': '[85.72989891886034, 86.24042272433384, 86.7423225594017]', 'log': '', 'qqq': ''}, {'clock_tick': 106.0, 'input.value': 87.23554823449862, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[85.72989891886034, 86.24042272433384, 86.7423225594017]', 'output.value': 86.73943117274472, 'output.value_history': '[86.24042272433384, 86.7423225594017, 87.23554823449862]', 'log': '', 'qqq': ''}, {'clock_tick': 107.0, 'input.value': 87.72005042746817, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[86.24042272433384, 86.7423225594017, 87.23554823449862]', 'output.value': 87.23264040712283, 'output.value_history': '[86.7423225594017, 87.23554823449862, 87.72005042746817]', 'log': '', 'qqq': ''}, {'clock_tick': 108.0, 'input.value': 88.19578068849475, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[86.7423225594017, 87.23554823449862, 87.72005042746817]', 'output.value': 87.71712645015384, 'output.value_history': '[87.23554823449862, 87.72005042746817, 88.19578068849475]', 'log': '', 'qqq': ''}, {'clock_tick': 109.0, 'input.value': 88.66269144494872, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[87.23554823449862, 87.72005042746817, 88.19578068849475]', 'output.value': 88.19284085363721, 'output.value_history': '[87.72005042746817, 88.19578068849475, 88.66269144494872]', 'log': '', 'qqq': ''}, {'clock_tick': 110.0, 'input.value': 89.12073600614355, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[87.72005042746817, 88.19578068849475, 88.66269144494872]', 'output.value': 88.659736046529, 'output.value_history': '[88.19578068849475, 88.66269144494872, 89.12073600614355]', 'log': '', 'qqq': ''}, {'clock_tick': 111.0, 'input.value': 95.0, 'input.delta_max': 3.0, 'input.window_size': 3.0, 'input.value_history': '[87.23554823449862, 87.72005042746817, 88.19578068849475]', 'output.value': 95.0, 'output.value_history': '[87.72005042746817, 88.19578068849475, 95]', 'log': '', 'qqq': ''}]
    s = GeneralPlugin(input=Input(window_size=10, delta_max=3), output=Output(), run_function=run, run_post_function=run_post, plugin_name=PLUGIN_NAME, parent=None)
    #verif_dict: {} = list(csv.DictReader(open(CSV_FILE), quoting=csv.QUOTE_NONNUMERIC))
    s.csv.run_test_from_file(verif_dict=testdata)

if __name__ == "__main__":
    test()